<!DOCTYPE html><html class="appearance-light" lang="en"><head><meta charset="UTF-8"><title>Heap and heapSort</title><meta name="description" content="Complacency is the enemy of study"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><!-- Google Analytics --><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/images/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="Definition
Heap is a kind of complete binary tree. A complete binary tree is a binary tree in which every level, except maybe last level, is full, and all nodes are as far as left as possible.
Commonly, there are two kinds of heap, the one is max-heap, and the other is min-heap.
Max-heap is the heap that parent’s value is greater than their children’s valu.."><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><a href="/">Steven's blog</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Heap and heapSort</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">Definition</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">Operations</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Insert-a-node"><span class="toc-text">Insert a node</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete-a-node"><span class="toc-text">Delete a node</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">Implement Max-heap with python</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">Heap sort</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/Data%20structure"><i class="tag post-item-tag">Data structure</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Heap and heapSort</h1><time class="has-text-grey" datetime="2021-04-07T12:05:48.000Z">2021-04-07</time><article class="mt-2 post-content"><h1>Definition</h1>
<p>Heap is a kind of complete binary tree. A complete binary tree is a binary tree in which every level, except maybe last level, is full, and all nodes are as far as left as possible.</p>
<p>Commonly, there are two kinds of heap, the one is max-heap, and the other is min-heap.</p>
<p>Max-heap is the heap that parent’s value is greater than their children’s value, and the parent’s value of min-heap is less than their children.</p>
<h1>Operations</h1>
<h2 id="Insert-a-node">Insert a node</h2>
<ol>
<li>
<p>Make a new node in the last level, as far left as possible. If the last level is full, make a new one;</p>
</li>
<li>
<p>If the new one breaks heap property, swap with its parent node;</p>
</li>
<li>
<p>Repeat former two steps until every node is satisfied with heap property;</p>
</li>
<li>
<p>Time complexity <code>O(log H)</code> H is the height of tree</p>
</li>
</ol>
<h2 id="Delete-a-node">Delete a node</h2>
<ol>
<li>
<p>Remove the root node, and bring the last node (rightmost node in the last level) to the root;</p>
</li>
<li>
<p>If the root breaks heap property, look at its children and swap it with the larger one;</p>
</li>
<li>
<p>Repeat former two steps until no nodes conflict heap property;</p>
</li>
<li>
<p>Time complexity <code>O(log H)</code> H is the height of tree</p>
</li>
</ol>
<h1>Implement Max-heap with python</h1>
<pre><code>class MaxHeap:
    def __init__(self, maxSize=None):
        self.maxSize = maxSize
        self.elements = []
        self.count = 0

    def addNode(self, value):

        if self.count &gt; self.maxSize:
            raise Exception('The heap is full.')

        self.elements.append(value)
        self.siftUp(self.count)
        self.count += 1

    def popNode(self):

        if self.count == 0:
            raise Exception('The heap is empty.')

        value = self.elements[0]
        self.count -= 1
        self.elements[0] = self.elements[self.count]
        self.siftDown(0)
        return value

    def siftUp(self, index):

        if index &gt; 0:
            parent = (index - 1) // 2
            if self.elements[index] &gt; self.elements[parent]:
                self.elements[index], self.elements[parent] = self.elements[parent], self.elements[index]
                self.siftUp(parent)

    def siftDown(self, index):

        left = 2 * index + 1
        right = 2 * index + 2
        largest = index
        if (left &lt;= self.count
                and self.elements[left] &gt;= self.elements[largest]
                and self.elements[left] &gt;= self.elements[right]):
            largest = left

        elif (right &lt; self.count
              and self.elements[right] &gt;= self.elements[largest]):
            largest = right

        if largest != index:
            self.elements[index], self.elements[largest] = self.elements[largest], self.elements[index]
            self.siftDown(largest)
</code></pre>
<h1>Heap sort</h1>
<p>From the above narrate, it is not hard to find no matter max-heap and min-heap, the top of heap is largest or least value of the whole heap, therefore, it</p>
<pre><code>
    def heapSort(arr):

      length = len(arr)
      heap = MaxHeap(length)

      for item in arr:
        heap.addNode(item)

      res = []
      count = heap.count
      while count &gt; 0:
        node = heap.popNode()
        res.insert(0, node)
        count -= 1

      return res

</code></pre>
<p>Time complexity <code>O(N)</code> N is the length of array<br>
Space complexity <code>O(N)</code> N is the length of array</p>
<p>Reference:</p>
<ol>
<li>
<p><a target="_blank" rel="noopener" href="https://web.stanford.edu/class/cs97si/03-data-structures.pdf">https://web.stanford.edu/class/cs97si/03-data-structures.pdf</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://python-data-structures-and-algorithms.readthedocs.io/zh/latest/15_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%8E%92%E5%BA%8F/heap_and_heapsort/">https://python-data-structures-and-algorithms.readthedocs.io/zh/latest/15_堆与堆排序/heap_and_heapsort/</a></p>
</li>
</ol>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2021/04/08/Sliding-window/" title="Sliding window"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: Sliding window</span></a><a class="button is-default" href="/2021/04/07/Stack-and-queue/" title="Stack and queue"><span class="has-text-weight-semibold">Next: Stack and queue</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><article class="mt-6 comment-container"><script async repo="Corner-MVP/Corner-MVP.github.io" src="https://utteranc.es/client.js" issue-term="pathname" theme="preferred-color-scheme"></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com//Corner-MVP"><i class="iconfont icon-github"></i></a><!-- Ins--><a title="instagram" target="_blank" rel="noopener nofollow" href="//www.instagram.com//"><i class="iconfont icon-ins"></i></a><!-- RSS--><!-- 知乎--><!-- 领英--><a title="linkedin" target="_blank" rel="noopener nofollow" href="//www.linkedin.com/in//in/steven-wang-b234761b3/"><i class="iconfont icon-linkedin"></i></a><!-- 脸书--></section><p><span>Copyright ©</span><span> Steven 2021</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap"><p>Powered by Hexo &verbar;&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" rel="noopener" href="//github.com/haojen">Theme by Haojen&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" rel="noopener" href="https://github.com/haojen/hexo-theme-Claudia" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true"></a></div></div><div><span></span></div></footer><script async defer src="https://buttons.github.io/buttons.js"></script><script src="/js/post.js"></script></body></html>